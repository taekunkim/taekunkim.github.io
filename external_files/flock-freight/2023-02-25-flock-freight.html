<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@800&family=Roboto:wght@700&display=swap');

        * {
            box-sizing: border-box;
        }

        /* Add a gray background color with some padding */
        body {
            font-family: Arial;
            padding: 20px;
            background: #EAEAEA;
            width: 1200px;
            margin: auto
        }

        p {
            font-size: 20px;
            padding: 20px;
        }

        /* Header/Blog Title */
        .header {
            padding: 0px;
            padding-top: 0px;
            padding-bottom: 0px;
            margin: 0px;
            font-size: 40px;
            text-align: left;
            font-family: 'Playfair Display', serif;
            color: #44741a;
        }

        /* Add a card effect for articles */
        .card {
            padding: 20px;
            padding-top: 10px;
        }

        /* Clear floats after the columns */
        .row:after {
            content: "";
            display: table;
            clear: both;
        }

        /* Footer */
        .footer {
            padding: 20px;
            background: #ddd;
            margin-top: 20px;
        }

        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
            bottom: 0;
        }

        #cardtitle {
            font-family: 'Roboto', sans-serif;
            color: #44741a
        }

        #contact {
            font-size: 17px;
        }

        * {
            box-sizing: border-box
        }

        /* Slideshow container */
        .slideshow-container {
            max-width: 1000px;
            position: relative;
            margin: auto;
        }

        /* Hide the images by default */
        .mySlides {
            display: none;
        }

        /* Next & previous buttons */
        .prev,
        .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            margin-top: -22px;
            padding: 16px;
            color: black;
            font-weight: bold;
            font-size: 18px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
        }

        /* Position the "next button" to the right */
        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        /* On hover, add a black background color with a little bit see-through */
        .prev:hover,
        .next:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        /* The dots/bullets/indicators */
        .dot {
            cursor: pointer;
            height: 7px;
            width: 7px;
            margin: 0 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.3s ease;
        }

        .active,
        .dot:hover {
            background-color: #717171;
        }

        /* Fading animation */
        .fade {
            animation-name: fade;
            animation-duration: 0.3s;
        }

        .column2 {
            float: left;
            width: 40%;
            margin: 50px;
        }

        .column3 {
            float: left;
            width: 30%;
            margin: 10px;
        }

        @keyframes fade {
            from {
                opacity: .4
            }

            to {
                opacity: 1
            }
        }
    </style>
</head>

<body>
    <p style="font-family: Arial; font-size: 18px; padding: 0px; margin: 0px">
        <a href="https://github.com/taekunkim/flock-freight">
            <u>Github</u>
        </a>
        &nbsp;|&nbsp;
        <a href="https://docs.google.com/document/d/1Q7FWNHsxKLSr48Nl4PEYc4-H1SRNo9LFsv8YoR1tk0A/edit?usp=sharing">
            <u>Paper</u>
        </a>
    </p>


    <div class="header">
        <h2>Selecting the Most Profittable<br>Freight Offer</h2>
        <p style="font-size:23px; padding:0px">A07: Giho Kim, Tae Kun Kim, Joyce Yan </p>
    </div>

    <div class="row">
        <div>
            <div class="card">
                <h2 id="cardtitle">BACKGROUND</h2>
                <p>Flock Freight is a logistics company that helps customers ship freights across the nation
                    economically. Acting as a middleman between customers and freight truck companies, Flock Freight
                    puts customers' orders to auction. Truckers make offers to ship the freight at a lower price.
                </p>
                <img src="figures/logic.png" width=50% class="center">
                <p>Bidders can revoke their offers at any time, so Flock Freight must know when it sees a good offer --
                    waiting for a better offer means risking the current best offer to expire. This is called an Optimal
                    Stopping Problem.
                </p>
                <img src="figures/optimal_stopping_problem.png" width=50% class="center">

            </div>

            <div class="card">
                <h2 id="cardtitle">OBJECTIVE</h2>
                <p>Create an Optimal Stopping model that selects the best offer received for each order</p>
            </div>

            <div class="card">
                <h2 id="cardtitle">DATA</h2>
                <p>There are 707,418 offers and 280,906 orders in the data set.</p>
                <p>The offer data includes the offer date, offer rate, and offer type, which can be either PTL or FTL:
                    PTL (Partial Truckload) shares a truck with multiple orders; FTL (Full Truckload) offers an entire
                    truck to a single order.</p>
                <p>The order data includes the order date, origin and destination zipcodes, route mileage, and
                    preferences of the shipper.</p>
            </div>

            <div class="card">
                <h2 id="cardtitle">EDA / DATA CLEANING / DATA ENGINEERING</h2>
                <p>Outliers such as offers with extreme delivery rates and orders with overwhelming numbers of offers
                    were removed.</p>

                <div class="row" style="margin: auto">
                    <div class="column2">
                        <img src="figures/distribution_with_anomalies.png" width=100% class="center">

                    </div>
                    <div class="column2">
                        <img src="figures/distribution_without_anomalies.png" width=100% class="center">
                    </div>
                </div>

                <!-- Slideshow container -->
                <div class="slideshow-container">

                    <!-- Full-width images with number and caption text -->

                    <div class="mySlides fade">
                        <img src="figures/best_offer_distribution.png" height=400px class="center">
                    </div>

                    <div class="mySlides fade">
                        <img src="figures/offer_rate_distribution.png" height=400px class="center">
                    </div>

                    <div class="mySlides fade">
                        <img src="figures/offer_count_distribution.png" height=400px class="center">
                    </div>

                    <div class="mySlides fade">
                        <img src="figures/hours_given_distribution.png" height=400px class="center">
                    </div>

                    <div class="mySlides fade">
                        <img src="figures/mileage_distribution.png" height=400px class="center">
                    </div>

                    <div class="mySlides fade">
                        <img src="figures/length_distribution.png" height=400px class="center">
                    </div>

                    <!-- Next and previous buttons -->
                    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                    <a class="next" onclick="plusSlides(1)">&#10095;</a>
                </div>
                <br>

                <!-- The dots/circles -->
                <div style="text-align:center">
                    <span class="dot" onclick="currentSlide(1)"></span>
                    <span class="dot" onclick="currentSlide(2)"></span>
                    <span class="dot" onclick="currentSlide(3)"></span>
                    <span class="dot" onclick="currentSlide(4)"></span>
                    <span class="dot" onclick="currentSlide(5)"></span>
                    <span class="dot" onclick="currentSlide(6)"></span>
                </div>



                <div class="row" style="margin: auto">
                    <div class="column2">
                        <img src="figures/offers_per_week.png" width=100% class="center">
                    </div>
                    <div class="column2">
                        <img src="figures/median_best_offer_per_week.png" width=100% class="center">
                    </div>
                </div>

                <div class="row" style="margin: auto">
                    <div class="column2">
                        <img src="figures/origin_map.png" width=100% class="center">
                    </div>
                    <div class="column2">
                        <img src="figures/destination_map.png" width=100% class="center">
                    </div>
                </div>

                <div class="row" style="margin: auto">
                    <div class="column3">
                        <img src="figures/median_offer_map.png" width=100%>
                    </div>
                    <div class="column3">
                        <img src="figures/median_best_rate_map.png" width=100%>
                    </div>
                    <div class="column3">
                        <img src="figures/rate_per_mile_map.png" width=100%>
                    </div>
                </div>

                <p>Clustering zip codes to 10 regions enables ML models to use the 857 unique origin and destination
                    zipcodes data as categorical features.</p>

                <img src="figures/clusters_of_coordinates.png" height=300px class="center">

                <p>Given that the gap between initial and final offer rates vary by the number of offers an order
                    receives, a model that predicts the number of offers an order will received needs to be built.</p>

                <div class="row" style="margin: auto">
                    <div class="column2">
                        <img src="figures/rate_change.png" width=100%>
                    </div>
                    <div class="column2">
                        <img src="figures/offer_std.png" width=100%>
                    </div>
                </div>

            </div>

            <div class="card">
                <h2 id="cardtitle">METHODS</h2>
                <p>An estimate of offer rates is needed to identify a good offer. The EDA hints the importance of
                    predicting the number of offers when estimating offer rates.</p>

                <p> The goal is to identify the best offer, not to predict the magnitudes of offer rates. Thus, a
                    classifier model is needed.</p>

                <p> All in all, a two-part hybrid model should be created.</p>

                <img src="figures/models.png" width=50% class="center">


                <p>XGB Regressor, Decision Tree, and XGB Classifier are the best models to predict the offer rate,
                    estimate number of offers, and identify best offers. </p>
            </div>

            <div class="card">
                <h2 id="cardtitle">MODEL SELECTION</h2>
                <p>XGB Regressor, Decision Tree, and XGB Classifier are the best models to predict the offer rate,
                    estimate number of offers, and identify best offers.</p>

                <div class="row" style="margin: auto">
                    <div class="column3">
                        <img src="figures/offer_count_model_selection.png" width=100% class="center">

                    </div>
                    <div class="column3">
                        <img src="figures/minimum_cost_model_selection.png" width=100% class="center">
                    </div>
                    <div class="column3">
                        <img src="figures/hybrid_model_selection.png" width=100% class="center">
                    </div>
                </div>

                <p>For each of the models, the importance of each feature was calculated.</p>

                <img src="figures/offer_model_feature_importance.png" width=50% class="center">
                <img src="figures/minimum_cost_model_feature_importance.png" width=50% class="center">
                <img src="figures/hybrid_model_feature_importance.png" width=50% class="center">
            </div>

            <div class="card">
                <h2 id="cardtitle">RESULTS</h2>
                <p>The hybrid model has an 56.0% accuracy in identifying best offers. That of Flock Freight is 51.7%.
                </p>
                <p>The final model is able to identify offers with lowest rates 8.2% more times than the original
                    Flock Freight model does.</p>
                <p>The hybrid model scores 81.4% in sensitivity and 71.8% in specificity.</p>
                <p><b>That is, the hybrid model is able to identify 81.4 best offers for every 100 best offers.</b></p>
                <p><b>Moreover, the hybrid model is able to identify 71.8 bad offers for every 100 bad offers.</b></p>

                <div class="row" style="margin: auto">
                    <div class="column2">
                        <img src="figures/model_accuracy.png" width=100% class="center">

                    </div>
                    <div class="column2">
                        <img src="figures/model_sensitivity.png" width=100% class="center">
                    </div>
                </div>
                <p></p>
            </div>
        </div>
    </div>

    <div class="card">
        <h2 id="cardtitle">RESEARCH STUDENT CONTACTS</h2>
        <p id="contact">
            Giho Kim | UCSD Student <a href="mailto:gihokim1997@gmail.com">gihokim1997@gmail.com</a><br>
            Tae Kun Kim | UCSD Student <a href="mailto:taekunkim214@gmail.com">taekunkim214@gmail.edu</a><br>
            Joyce Yan | UCSD Student<a href="mailto:joyceyan1014@gmail.com">joyceyan1014@gmail.edu</a>
        </p>
    </div>

    <div class="card">
        <h2 id="cardtitle">AFFILIATE MENTOR CONTACT</h2>
        <p id="contact">Matt Stirling | Flock Freight Data Scientist <a
                href="mailto:gkim@ucsd.com">matt.stirling@flockfreight.com</a><br>
            Soohyun Nam Liao | UCSD Professor <a href="mailto:snam@ucsd.edu">snam@ucsd.edu</a></p>
    </div>

    <img src="./Flock_Freight_Logo-removebg.png" width="20%" style="float: right;">

    <script>

        let slideIndex = 1;
        showSlides(slideIndex);

        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        function currentSlide(n) {
            showSlides(slideIndex = n);
        }

        function showSlides(n) {
            let i;
            let slides = document.getElementsByClassName("mySlides");
            let dots = document.getElementsByClassName("dot");
            if (n > slides.length) { slideIndex = 1 }
            if (n < 1) { slideIndex = slides.length }
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            for (i = 0; i < dots.length; i++) {
                dots[i].className = dots[i].className.replace(" active", "");
            }
            slides[slideIndex - 1].style.display = "block";
            dots[slideIndex - 1].className += " active";
        }
    </script>

</body>

</html>